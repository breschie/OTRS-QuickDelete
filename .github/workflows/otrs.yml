---
name: OTRS
on:
  push:
  pull_request:

jobs:
  build:
    name: UnitTest
    runs-on: ubuntu-latest
    container:
      image: 'juanluisbaptiste/otrs:latest'
      options: --user root
    steps:
      - name: Checkout Code
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - name: Check perl version
        run: perl -V
      - name: Check env
        run: env | sort
      - name: Set up Kernel/Config.pm
        run: 'cp --no-clobber Kernel/Config.pm.dist Kernel/Config.pm'
      - name: Set up Kernel/Config.pm
        run: 'bin/otrs.Console.pl Dev::UnitTest::Run --verbose --directory OTRSQuickDelete'